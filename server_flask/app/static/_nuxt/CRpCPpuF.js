import{d as E,u as I,w as M,a as P,r as R,o as i,c as $,b as p,e as l,i as C,f as a,_ as S,g as n,h as f,F as g,j as y,t as U,n as V,k as q,l as b}from"./CUplRSS5.js";import{_ as H,a as G,b as J,c as K,u as O}from"./BDt75oMD.js";import{_ as Q,a as W,u as X}from"./D_7QVLHn.js";const Y={class:"my-6"},Z={class:"relative overflow-auto"},ee={class:"table-fixed min-w-full overflow-clip"},te={class:"relative"},ae={class:"isolate divide-y divide-default"},ne=["onClick"],se={class:"py-3"},le={class:"flex justify-center border-t border-default space-x-2 py-4"},ce=E({__name:"index",async setup(oe){let u,k;const B=I(),x=[{name:"id",header:"#"},{name:"surname",header:"Фамилия"},{name:"firstname",header:"Имя"},{name:"patronymic",header:"Отчество"},{name:"birthday",header:"Дата рождения",cell:s=>new Date(s.birthday).toLocaleDateString()},{name:"created",header:"Обновлено",cell:s=>X(s.created).value}],r=b(!1),o=b(0),d=b(""),{data:v,status:c,refresh:w}=([u,k]=M(()=>O("candidates",()=>$fetch("/routes/candidates/"+o.value,{query:{search:d.value}}),{watch:[o],default:()=>({has_next:!1,candidates:[]})})),u=await u,k(),u);P(R(d,1e3),()=>{o.value===0?w():o.value=0});function D(s,e){return r.value=!1,c.value="success",e&&B.add({title:"Информация",description:"Анкета уже была загружена ранее.",color:"info"}),V("/profile/"+s)}return(s,e)=>{const m=S,T=G,F=Q,z=H,A=J,L=K,N=W;return i(),$(N,null,{default:p(()=>[l(z,{title:"КАНДИДАТЫ"},{links:p(()=>[l(F,{open:a(r),"onUpdate:open":e[1]||(e[1]=t=>C(r)?r.value=t:null),title:"Анкета",description:"Введите анкетные данные"},{body:p(()=>[l(T,{onUpdate:D})]),default:p(()=>[l(m,{title:"Добавить анкету",variant:"ghost",icon:"i-lucide-user-plus",loading:a(c)==="pending",onClick:e[0]||(e[0]=t=>r.value=!0)},null,8,["loading"])]),_:1},8,["open"])]),_:1}),n("div",Y,[l(A,{id:"search",modelValue:a(d),"onUpdate:modelValue":e[2]||(e[2]=t=>C(d)?d.value=t:null),modelModifiers:{trim:!0},type:"search",placeholder:"поиск по фаимилии, имени, отчеству"},null,8,["modelValue"])]),n("div",Z,[n("table",ee,[n("thead",te,[n("tr",null,[(i(),f(g,null,y(x,(t,h)=>n("th",{key:h,class:"p-4 text-sm text-highlighted text-left"},U(t.header),1)),64))])]),n("tbody",ae,[(i(!0),f(g,null,y(a(v).candidates,(t,h)=>(i(),f("tr",{key:h,class:"hover:bg-gray-100 cursor-pointer",onClick:_=>("navigateTo"in s?s.navigateTo:a(V))("/profile/"+t.id)},[(i(),f(g,null,y(x,(_,j)=>n("td",{key:j,class:"p-4 text-sm text-muted whitespace-nowrap"},U(_.cell?_.cell(t):t[_.name]),1)),64))],8,ne))),128))])])]),a(v).candidates.length?q("",!0):(i(),$(L,{key:0,title:"Данные отсутствуют",size:"sm",variant:"naked"})),n("div",se,[l(m,{variant:"outline",label:"Обновить данные",loading:a(c)==="pending",size:"sm",onClick:e[3]||(e[3]=t=>a(w)())},null,8,["loading"])]),n("div",le,[l(m,{title:"Предыдущая страница",icon:"i-lucide-arrow-left",disabled:!a(o)||a(c)=="pending",class:"me-2 rounded-full",onClick:e[4]||(e[4]=t=>o.value--)},null,8,["disabled"]),l(m,{title:"Следующая страница",icon:"i-lucide-arrow-right",disabled:!a(v).has_next||a(c)=="pending",class:"ms-2 rounded-full",onClick:e[5]||(e[5]=t=>o.value++)},null,8,["disabled"])])]),_:1})}}});export{ce as default};
