import{o as j,_ as z,a as E,b as P,c as R,d as S,e as T,f as q}from"./ResumeForm.vue_vue_type_script_setup_true_lang-mOY_8n00.js";import{d as A,u as H,a as G,o as J,w,r as K,b as o,c as x,e as r,f as n,_ as O,g as a,h as v,F as g,i as y,t as $,j as Q,k as W,l as X,m as d}from"./index-D7An_iUK.js";const Y={class:"my-6"},Z={class:"relative overflow-auto"},ee={class:"table-fixed min-w-full overflow-clip"},te={class:"relative"},ae={class:"isolate divide-y divide-default"},ne=["onClick"],se={class:"py-3"},le={class:"flex justify-center border-t border-default space-x-2 py-4"},de=A({__name:"IndexView",setup(oe){const C=H(),b=G(),k=[{name:"id",header:"#"},{name:"surname",header:"Фамилия"},{name:"firstname",header:"Имя"},{name:"patronymic",header:"Отчество"},{name:"birthday",header:"Дата рождения",cell:l=>new Date(l.birthday).toLocaleDateString()},{name:"created",header:"Обновлено",cell:l=>X(l.created).value}],u=d({has_next:!1,candidates:[]}),c=d(!1),s=d(0),m=d(""),i=d("string");J(async()=>await _());async function _(){u.value=await j("/routes/candidates/"+s.value,{query:{search:m.value}})}w(K(m,1e3),async()=>{s.value===0?await _():s.value=0}),w(s,async()=>await _());function U(l,e){return c.value=!1,i.value="success",e&&C.add({title:"Информация",description:"Анкета уже была загружена ранее.",color:"info"}),b.push("/profile/"+l)}return(l,e)=>{const p=O,V=R,B=P,D=E,F=S,I=T,L=z,M=q;return o(),x(M,null,{default:r(()=>[n(L,null,{default:r(()=>[n(D,{title:"КАНДИДАТЫ"},{links:r(()=>[n(B,{open:c.value,"onUpdate:open":e[1]||(e[1]=t=>c.value=t),title:"Анкета",description:"Введите анкетные данные"},{body:r(()=>[n(V,{onUpdate:U})]),default:r(()=>[n(p,{title:"Добавить анкету",variant:"ghost",icon:"i-lucide-user-plus",loading:i.value==="pending",onClick:e[0]||(e[0]=t=>c.value=!0)},null,8,["loading"])]),_:1},8,["open"])]),_:1}),a("div",Y,[n(F,{id:"search",modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=t=>m.value=t),modelModifiers:{trim:!0},type:"search",placeholder:"поиск по фаимилии, имени, отчеству"},null,8,["modelValue"])]),a("div",Z,[a("table",ee,[a("thead",te,[a("tr",null,[(o(),v(g,null,y(k,(t,h)=>a("th",{key:h,class:"p-4 text-sm text-highlighted text-left"},$(t.header),1)),64))])]),a("tbody",ae,[(o(!0),v(g,null,y(u.value.candidates,(t,h)=>(o(),v("tr",{key:h,class:"hover:bg-gray-100 cursor-pointer",onClick:f=>Q(b).push("/profile/"+t.id)},[(o(),v(g,null,y(k,(f,N)=>a("td",{key:N,class:"p-4 text-sm text-muted whitespace-nowrap"},$(f.cell?f.cell(t):t[f.name]),1)),64))],8,ne))),128))])])]),u.value.candidates?W("",!0):(o(),x(I,{key:0,title:"Данные отсутствуют",size:"sm",variant:"naked"})),a("div",se,[n(p,{variant:"outline",label:"Обновить данные",loading:i.value==="pending",size:"sm",onClick:e[3]||(e[3]=t=>_())},null,8,["loading"])]),a("div",le,[n(p,{title:"Предыдущая страница",icon:"i-lucide-arrow-left",disabled:!s.value||i.value=="pending",class:"me-2 rounded-full",onClick:e[4]||(e[4]=t=>s.value--)},null,8,["disabled"]),n(p,{title:"Следующая страница",icon:"i-lucide-arrow-right",disabled:!u.value.has_next||i.value=="pending",class:"ms-2 rounded-full",onClick:e[5]||(e[5]=t=>s.value++)},null,8,["disabled"])])]),_:1})]),_:1})}}});export{de as default};
